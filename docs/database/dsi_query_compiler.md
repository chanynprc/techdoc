## 查询编译器

### 查询处理器的步骤

1. **查询语句=>语法树**：对查询语句进行语法分析
2. **语法树=>逻辑查询计划**：把语法分析树转换为关系代数表达式树
3. **逻辑查询计划=>物理查询计划**：对逻辑查询计划进行等价转换，并生成等价的物理查询计划。物理查询计划指明了要执行的操作、操作的执行顺序、执行每步操作所用的算法、获取存储数据的方式、数据从一个操作传递给另一个操作的方式

### 优化器中的关系代数理论

#### 交换律和结合律

集合和包（关系）的自然连接、内连接、交、并满足交换律和结合律。

```
R × S = S × R
R ⋈ S = S ⋈ R
R ∩ S = S ∩ R
R ∪ S = S ∪ R
```

```
(R × S) × T = R × (S × T)
(R ⋈ S) ⋈ T = R ⋈ (S ⋈ T)
(R ∩ S) ∩ T = R ∩ (S ∩ T)
(R ∪ S) ∪ T = R ∪ (S ∪ T)
```

但是需要注意的是，集合满足的的一些定律，在包上不一定成立。例如：

```
//在集合上成立，在包上不成立（例如R=S=T={a}）
(R ∪ S) ∩ T = (R ∩ T) ∪ (S ∩ T)
```

